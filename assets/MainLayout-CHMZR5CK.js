import{p as w,i as y,d as _,k as b,f as i,a as e,e as d,r as C,w as v,g,u as r,t as B,o as l,_ as k,q as T,s as A}from"./index-CjGxMCzd.js";const M="https://script.google.com/macros/s/AKfycbyqeP_Pn6HnXAQhbUWa4m5UxV9TVyj43YMBek1YHBojQH3U1OAI5xqZTOQN8eWBkda9Zg/exec";async function U(){try{const t=await fetch(M,{method:"GET",redirect:"follow"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=await t.json();return o.success&&o.totalUsers!==void 0?o.totalUsers:(console.error("GA4 API error:",o.error),0)}catch(t){return console.error("Failed to fetch GA4 data:",t),0}}function S(t){return t.toLocaleString("zh-TW")}const h=y(0),f=y(!1),m=y(!1);function V(){const t=w(()=>S(h.value));return{totalUsers:h,loading:f,loaded:m,formattedUsers:t,loadVisitorCount:async()=>{if(!(m.value||f.value)){f.value=!0;try{h.value=await U(),m.value=!0}catch(s){console.error("Failed to load visitor count:",s),m.value=!0}finally{f.value=!1}}}}}const H={class:"nav-sidebar"},$={class:"nav-menu"},I={class:"visitor-counter"},P={class:"counter-display"},N={key:0,class:"counter-loading"},E={key:1,class:"counter-number"},z={key:2,class:"counter-error"},L=_({__name:"NavigationSidebar",setup(t){const{totalUsers:o,loading:s,formattedUsers:p,loadVisitorCount:n}=V();return b(()=>{n()}),(x,a)=>{const u=C("router-link");return l(),i("aside",H,[a[5]||(a[5]=e("div",{class:"sidebar-header"},[e("h1",{class:"site-title"},"Hackdog Place")],-1)),e("nav",$,[d(u,{to:"/",class:"nav-item","active-class":"active"},{default:v(()=>[...a[0]||(a[0]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),e("span",null,"Home",-1)])]),_:1}),d(u,{to:"/resume",class:"nav-item","active-class":"active"},{default:v(()=>[...a[1]||(a[1]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})],-1),e("span",null,"Resume",-1)])]),_:1}),d(u,{to:"/about",class:"nav-item","active-class":"active"},{default:v(()=>[...a[2]||(a[2]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("span",null,"About",-1)])]),_:1}),d(u,{to:"/archives",class:"nav-item","active-class":"active"},{default:v(()=>[...a[3]||(a[3]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("polyline",{points:"21 8 21 21 3 21 3 8"}),e("rect",{x:"1",y:"3",width:"22",height:"5"}),e("line",{x1:"10",y1:"12",x2:"14",y2:"12"})],-1),e("span",null,"Archives",-1)])]),_:1})]),e("div",I,[a[4]||(a[4]=g('<div class="counter-label" data-v-34ac2f85><svg class="counter-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-34ac2f85><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-34ac2f85></path><circle cx="9" cy="7" r="4" data-v-34ac2f85></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87" data-v-34ac2f85></path><path d="M16 3.13a4 4 0 0 1 0 7.75" data-v-34ac2f85></path></svg><span data-v-34ac2f85>累計訪客</span></div>',1)),e("div",P,[r(s)?(l(),i("div",N,"載入中...")):r(o)>0?(l(),i("div",E,B(r(p)),1)):(l(),i("div",z,"暫無數據"))])])])}}}),j=k(L,[["__scopeId","data-v-34ac2f85"]]),q=()=>{if(typeof window>"u")return"light";const t=localStorage.getItem("theme");return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},c=y(q());typeof window<"u"&&document.documentElement.setAttribute("data-theme",c.value);function D(){const t=()=>{c.value=c.value==="light"?"dark":"light"},o=s=>{c.value=s};return T(c,s=>{typeof window<"u"&&(localStorage.setItem("theme",s),document.documentElement.setAttribute("data-theme",s))},{immediate:!1}),{theme:c,toggleTheme:t,setTheme:o}}const G={class:"main-layout"},Q=["title"],R={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},W={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},F={class:"main-content-wrapper"},O={class:"main-content"},Y=_({__name:"MainLayout",setup(t){const{theme:o,toggleTheme:s}=D();return(p,n)=>(l(),i("div",G,[e("button",{class:"theme-toggle",onClick:n[0]||(n[0]=(...x)=>r(s)&&r(s)(...x)),title:r(o)==="light"?"切換到暗黑模式":"切換到明亮模式"},[r(o)==="light"?(l(),i("svg",R,[...n[1]||(n[1]=[e("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(l(),i("svg",W,[...n[2]||(n[2]=[g('<circle cx="12" cy="12" r="5" data-v-e9fce6b1></circle><line x1="12" y1="1" x2="12" y2="3" data-v-e9fce6b1></line><line x1="12" y1="21" x2="12" y2="23" data-v-e9fce6b1></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-e9fce6b1></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-e9fce6b1></line><line x1="1" y1="12" x2="3" y2="12" data-v-e9fce6b1></line><line x1="21" y1="12" x2="23" y2="12" data-v-e9fce6b1></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-e9fce6b1></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-e9fce6b1></line>',9)])]))],8,Q),d(j),e("div",F,[e("main",O,[A(p.$slots,"default",{},void 0)])])]))}}),K=k(Y,[["__scopeId","data-v-e9fce6b1"]]);export{K as M};
